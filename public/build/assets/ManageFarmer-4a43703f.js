import{u as O,k as F,r as n,o as s,b as i,d as _,e as t,w as o,O as m,i as v,q as T,g as k,m as V,l as I,f as M}from"./app-c4ff528f.js";import{A as j}from"./AdminStore-4230c03b.js";const K={class:"row justify-center"},L={class:"col-xs-12 col-md-9 col-xl-7"},R={class:"column q-gutter-md"},U=_("div",{class:"row"},"Farmer List",-1),Q={key:0},W={key:1},Y={key:0},z={key:1},G={key:2},H={key:3},Z={__name:"ManageFarmer",props:{farmers:[]},setup(x){const d=x,r=O(),f=j(),N=[{name:"farmer_id",required:!0,label:"Farmer ID",align:"left",field:a=>a.farmer_id,sortable:!0},{name:"full_name",align:"center",label:"Farmer Name",field:"full_name",sortable:!0},{name:"phone_no",align:"center",label:"Phone No.",field:"phone_no",sortable:!0},{name:"district",label:"District",field:a=>a.district.district_name},{name:"status",align:"center",label:"Status",field:a=>a.status,sortable:!0},{name:"verification",align:"center",label:"Verification",field:a=>a.verification,sortable:!0},{name:"actions",align:"right",field:"id"}],S=F(d.farmers.data),q=a=>{m.get(route("open-clicked",a),{})},$=a=>{r.dialog({title:"Confirm Delete",message:"Are you sure?",ok:"Yes",cancel:"No"}).onOk(()=>{m.delete(route("farmer-basic-info.destroy",a),{onStart:()=>r.loading.show({message:"Deleting...."}),onFinish:()=>r.loading.hide(),onSuccess:()=>r.loading.hide(),onError:()=>r.loading.hide(),preserveState:!1})}).onCancel(()=>{})};function D(a){const{page:l,rowsPerPage:g}=a.pagination;m.get(route("manage-farmer"),{per_page:g,page:l},{})}const y=F({page:d.farmers.current_page,rowsPerPage:d.farmers.per_page,rowsNumber:d.farmers.total}),h=a=>{m.get(route("manage-farmer"),{search:a,per_page:10,page:1},{onStart:()=>r.loading.show(),onSuccess:()=>r.loading.hide(),onFinish:()=>r.loading.hide(),onError:()=>r.loading.hide()})};return(a,l)=>{const g=n("q-icon"),P=n("q-avatar"),E=n("q-input"),u=n("q-btn"),w=n("q-item-section"),C=n("q-item"),A=n("q-menu"),b=n("q-td"),c=n("q-badge"),B=n("q-table");return s(),i("div",K,[_("div",L,[t(B,{flat:"",bordered:"",title:"Farmers",rows:S.value,columns:N,"row-key":"status",onRequest:D,"rows-per-page-options":[2,5,7,15],pagination:y.value,"onUpdate:pagination":l[4]||(l[4]=e=>y.value=e)},{"top-left":o(()=>[_("div",R,[U,v("̵ "),_("div",null,[t(E,{outlined̵̵:"",debounce:"300",dense:"",label:"Search",onKeyup:l[0]||(l[0]=T(M(e=>h(k(f).searchFarmerText),["prevent"]),["enter"])),modelValue:k(f).searchFarmerText,"onUpdate:modelValue":l[1]||(l[1]=e=>k(f).searchFarmerText=e),clearable:"",onClear:l[2]||(l[2]=e=>h(""))},{append:o(()=>[t(P,null,{default:o(()=>[t(g,{name:"search"})]),_:1})]),_:1},8,["modelValue"])])])]),"top-right":o(()=>[t(u,{onClick:l[3]||(l[3]=e=>a.$inertia.get(a.route("farmer-basic-info.index"))),outline:"",rounded:"",label:"Add Farmer",dense:"",flat:"",class:"text-white q-px-lg q-mx-lg",style:{"background-color":"#2e6525"}})]),"body-cell-actions":o(e=>[t(b,{props:e},{default:o(()=>[a.$page.props.auth.user.roles_id===2?(s(),V(u,{key:0,dense:"",flat:"",onClick:p=>q(e.row.id),label:"VIEW",style:{color:"#2e6525"}},null,8,["onClick"])):(s(),V(u,{key:1,dense:"",round:"",flat:"",onClick:p=>q(e.row.id),label:"OPEN",style:{color:"#2e6525"}},null,8,["onClick"])),t(u,{dense:"",round:"",flat:"",style:{color:"#2e6525"},icon:"more_vert"},{default:o(()=>[t(A,{fit:"",anchor:"bottom left",self:"top left"},{default:o(()=>[t(C,{clickable:"",onClick:p=>a.$inertia.get(a.route("farmer-basic-info.edit",e.row.id))},{default:o(()=>[t(w,null,{default:o(()=>[v("View/Edit")]),_:1})]),_:2},1032,["onClick"]),t(C,{clickable:"",onClick:p=>$(e.row.id)},{default:o(()=>[t(w,{style:{color:"red"}},{default:o(()=>[v("Delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-status":o(e=>[t(b,{props:e},{default:o(()=>[e.value==="Incomplete"?(s(),i("div",Q,[t(c,{class:"q-pa-sm",color:"grey",label:e.value},null,8,["label"])])):(s(),i("div",W,[t(c,{class:"q-pa-sm",style:{"background-color":"#2e6525"},label:e.value},null,8,["label"])]))]),_:2},1032,["props"])]),"body-cell-verification":o(e=>[t(b,{props:e},{default:o(()=>[e.value==="Submitted"?(s(),i("div",Y,[t(c,{class:"q-pa-sm",style:{"background-color":"#cd9f27"},label:e.value},null,8,["label"])])):e.value==="Pending"?(s(),i("div",z,[t(c,{class:"q-pa-sm",style:{"background-color":"darkgrey"},label:e.value},null,8,["label"])])):e.value==="Approved"?(s(),i("div",G,[t(c,{class:"q-pa-sm",style:{"background-color":"#59964f"},label:e.value},null,8,["label"])])):e.value==="Rejected"?(s(),i("div",H,[t(c,{class:"q-pa-sm",style:{"background-color":"#e94343"},label:e.value},null,8,["label"])])):I("",!0)]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])])])}}};export{Z as default};
