import{u as P,A,n as p,o as i,a as s,b as u,d as l,g as r,O as c,l as v,f as D,v as E,e as d,x as T,i as I,Q as f,ak as j,am as w,ac as M,j as F,k as S,w as O}from"./app-bd4a7f13.js";import{Q as R}from"./QSelect-5ba19456.js";import{Q as U,a as y}from"./QTable-95ead02b.js";import{Q as m}from"./QBadge-2f8e8d45.js";import"./QChip-7f43fea8.js";const K={class:"row justify-center"},L={class:"col-xs-12 col-md-9 col-xl-7"},W={class:"column q-gutter-y-md"},Y=u("div",{class:"row"},"Farmer List",-1),z={class:"column q-gutter-y-md"},G={key:0},H={key:0},J={key:1},X={key:0},Z={key:1},ee={key:2},ae={key:3},ie={__name:"ManageFarmer",props:{farmers:[]},setup(C){const g=C,o=P(),n=A(),Q=[{name:"farmer_id",required:!0,label:"Farmer ID",align:"left",field:a=>a.farmer_id,sortable:!0},{name:"full_name",align:"center",label:"Farmer Name",field:"full_name",sortable:!0},{name:"phone_no",align:"center",label:"Phone No.",field:"phone_no",sortable:!0},{name:"district",label:"District",field:a=>a.district.district_name},{name:"status",align:"center",label:"Status",field:a=>a.status,sortable:!0},{name:"verification",align:"center",label:"Verification",field:a=>a.verification,sortable:!0},{name:"actions",align:"right",field:"id"}],B=p(g.farmers.data),V=[{label:"Pending",value:"Pending"},{label:"Submitted",value:"Submitted"},{label:"Approved",value:"Approved"},{label:"Rejected",value:"Rejected"}];p("");const h=a=>{c.get(route("open-clicked",a),{})},q=a=>{o.dialog({title:"Confirm Delete",message:"Are you sure?",ok:"Yes",cancel:"No"}).onOk(()=>{c.delete(route("farmer-basic-info.destroy",a),{onStart:()=>o.loading.show({message:"Deleting...."}),onFinish:()=>o.loading.hide(),onSuccess:()=>o.loading.hide(),onError:()=>o.loading.hide(),preserveState:!1})}).onCancel(()=>{})};function x(a){const{page:t,rowsPerPage:e}=a.pagination;c.get(route("manage-farmer"),{per_page:e,page:t},{})}const _=p({page:g.farmers.current_page,rowsPerPage:g.farmers.per_page,rowsNumber:g.farmers.total}),k=a=>{c.get(route("manage-farmer"),{search:a,per_page:10,page:1},{onStart:()=>o.loading.show(),onSuccess:()=>o.loading.hide(),onFinish:()=>o.loading.hide(),onError:()=>o.loading.hide()})},$=a=>{c.get(route("manage-farmer"),{search:a,per_page:10,page:1,filterBy:n.filterBy},{onStart:()=>o.loading.show(),onSuccess:()=>o.loading.hide(),onFinish:()=>o.loading.hide(),onError:()=>o.loading.hide()})},N=a=>{n.filterBy="",c.get(route("manage-farmer"),{search:a,per_page:10,page:1,filterBy:n.filterBy},{onStart:()=>o.loading.show(),onSuccess:()=>o.loading.hide(),onFinish:()=>o.loading.hide(),onError:()=>o.loading.hide()})};return(a,t)=>(i(),s("div",K,[u("div",L,[l(U,{"table-header-style":{backgroundColor:"#302e2a"},"table-header-class":"text-white",flat:"",bordered:"",title:"Farmers",rows:B.value,columns:Q,"row-key":"status",onRequest:x,"rows-per-page-options":[2,5,7,15],pagination:_.value,"onUpdate:pagination":t[7]||(t[7]=e=>_.value=e)},{"top-left":r(()=>[u("div",W,[Y,v("Ìµ "),u("div",null,[l(D,{outlined:"",debounce:"300",dense:"",label:"Search by Name",onKeyup:t[0]||(t[0]=E(O(e=>k(d(n).searchFarmerText),["prevent"]),["enter"])),modelValue:d(n).searchFarmerText,"onUpdate:modelValue":t[1]||(t[1]=e=>d(n).searchFarmerText=e),clearable:"",onClear:t[2]||(t[2]=e=>k(""))},{append:r(()=>[l(T,null,{default:r(()=>[l(I,{name:"search"})]),_:1})]),_:1},8,["modelValue"])])])]),"top-right":r(()=>[u("div",z,[u("div",null,[l(R,{modelValue:d(n).filterBy,"onUpdate:modelValue":[t[4]||(t[4]=e=>d(n).filterBy=e),t[5]||(t[5]=e=>$(d(n).searchFarmerText))],outlined:"",dense:"","emit-value":"","fill-input":"","hide-selected":"","map-options":"","option-label":"label","option-value":"value",placeholder:"Filter by Verification",color:"green","use-input":"",options:V},{after:r(()=>[d(n).filterBy!=""?(i(),s("div",G,[l(f,{icon:"clear",flat:"",dense:"",onClick:t[3]||(t[3]=e=>N(d(n).searchFarmerText))})])):j("",!0)]),_:1},8,["modelValue"])]),u("div",null,[l(f,{onClick:t[6]||(t[6]=e=>a.$inertia.get(a.route("farmer-basic-info.index"))),outline:"",rounded:"",label:"Add Farmer",dense:"",flat:"",class:"text-white q-px-lg q-mx-lg",style:{"background-color":"#2e6525"}})])])]),"body-cell-actions":r(e=>[l(y,{props:e},{default:r(()=>[a.$page.props.auth.user.roles_id===2?(i(),w(f,{key:0,dense:"",flat:"",onClick:b=>h(e.row.id),label:"VIEW",style:{color:"#2e6525"}},null,8,["onClick"])):(i(),w(f,{key:1,dense:"",round:"",flat:"",onClick:b=>h(e.row.id),label:"OPEN",style:{color:"#2e6525"}},null,8,["onClick"])),l(f,{dense:"",round:"",flat:"",style:{color:"#2e6525"},icon:"more_vert"},{default:r(()=>[l(M,{fit:"",anchor:"bottom left",self:"top left"},{default:r(()=>[l(F,{clickable:"",onClick:b=>a.$inertia.get(a.route("farmer-basic-info.edit",e.row.id))},{default:r(()=>[l(S,null,{default:r(()=>[v("View/Edit")]),_:1})]),_:2},1032,["onClick"]),l(F,{clickable:"",onClick:b=>q(e.row.id)},{default:r(()=>[l(S,{style:{color:"red"}},{default:r(()=>[v("Delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["props"])]),"body-cell-status":r(e=>[l(y,{props:e},{default:r(()=>[e.value==="Incomplete"?(i(),s("div",H,[l(m,{class:"q-pa-sm",color:"grey",label:e.value},null,8,["label"])])):(i(),s("div",J,[l(m,{class:"q-pa-sm",style:{"background-color":"#2e6525"},label:e.value},null,8,["label"])]))]),_:2},1032,["props"])]),"body-cell-verification":r(e=>[l(y,{props:e},{default:r(()=>[e.value==="Submitted"?(i(),s("div",X,[l(m,{class:"q-pa-sm",style:{"background-color":"#cd9f27"},label:e.value},null,8,["label"])])):e.value==="Pending"?(i(),s("div",Z,[l(m,{class:"q-pa-sm",style:{"background-color":"darkgrey"},label:e.value},null,8,["label"])])):e.value==="Approved"?(i(),s("div",ee,[l(m,{class:"q-pa-sm",style:{"background-color":"#59964f"},label:e.value},null,8,["label"])])):(i(),s("div",ae,[l(m,{class:"q-pa-sm",style:{"background-color":"red"},label:e.value},null,8,["label"])]))]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])])]))}};export{ie as default};
