import{u as B,n as g,T,o as q,a as D,b as u,d as s,w as l,f as o,s as E,g as d,p as L,v as P,x as A,m as I,q as M,e as O,Q as p,i as _,j as v,k as b,l as h,O as F,C as j}from"./app-4d64c5bc.js";import{Q as R,a as $}from"./QTable-c7fe8097.js";import{Q as w}from"./QSelect-d09f5d60.js";import"./QChip-4a5e7891.js";const z={class:"row justify-center"},G={class:"col-md-9 col-xl-7"},H=u("span",{class:"text-weight-bold"}," User",-1),J=["onSubmit"],K={class:"q-pa-sm"},W={class:"q-gutter-x-md column"},oe={__name:"ManageUsersPage",props:{users:[],districts:[],roles:[]},setup(k){const m=k,t=B(),f=m.users,V=m.districts,S=m.roles,c=g(!1),i=g(!1),Q=[{name:"user_name",align:"left",label:"User Name",field:"name"},{name:"email",align:"left",label:"Email",field:"email"},{name:"role_name",align:"left",label:"Role Name",field:r=>r.roles.name},{name:"district_name",align:"left",label:"District Name",field:r=>r.district.district_name},{name:"actions",align:"right",label:"Actions",field:"id"}],e=T({id:0,name:"",email:"",password:"",roles_id:0,district_id:0}),C=()=>{e.reset(),i.value=!0,c.value=!1},y=r=>{c.value=!0,i.value=!0,e.id=r.id,e.livestock_name=r.livestock_name},U=()=>{c.value===!1?e.post(route("manage-user.store"),{onStart:()=>t.loading.show(),onSuccess:()=>{e.reset(),f.value=m.users,t.notify({message:"User created",icon:"check",iconColor:"blue",closeBtn:!0})},onError:r=>{console.log(r),t.notify({message:r.message,icon:"warning",iconColor:"red",closeBtn:!0})},onFinish:()=>t.loading.hide(),preserveState:!1}):e.put(route("livestock.update",e.id),{onStart:()=>t.loading.show(),onSuccess:()=>{i.value=!1,t.notify({message:"Livestock updated",closeBtn:!0,icon:"check",iconColor:"blue"}),t.loading.hide()},onFinish:()=>t.loading.hide(),preserveState:!1})},x=r=>{t.dialog({title:"Confirm Delete",message:"Are you sure?",cancel:"No"}).onOk(()=>{F.delete(route("manage-user.destroy",r),{onStart:()=>t.loading.show({message:"Deleting...."}),onSuccess:()=>{t.notify({icon:"check",message:"User deleted",closeBtn:!0}),t.loading.hide()},onFinish:()=>t.loading.hide(),preserveState:!1})})};return(r,n)=>(q(),D("div",z,[u("div",G,[s(R,{flat:"",bordered:"",title:"User Controls",rows:o(f),columns:Q,"row-key":"name",pagination:r.initialPagination},{"top-right":l(()=>[s(d,{outline:"",rounded:"",label:"Add User",dense:"",flat:"",class:"text-white q-px-lg q-mx-lg",style:{"background-color":"#2e6525"},onClick:C})]),"body-cell-actions":l(a=>[s($,{props:a},{default:l(()=>[s(d,{dense:"",round:"",flat:"",onClick:N=>y(a.row),icon:"edit",style:{color:"#2e6525"}},null,8,["onClick"]),s(d,{dense:"",round:"",flat:"",color:"red",onClick:N=>x(a.row.id),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"]),s(E,{modelValue:i.value,"onUpdate:modelValue":n[5]||(n[5]=a=>i.value=a)},{default:l(()=>[s(L,null,{default:l(()=>[s(P,null,{default:l(()=>[s(A,null,{default:l(()=>[H]),_:1}),I(s(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[j]])]),_:1}),s(M,null,{default:l(()=>[u("form",{onSubmit:O(U,["prevent"]),method:"POST"},[u("div",K,[u("div",W,[s(p,{name:"name",standout:"",modelValue:o(e).name,"onUpdate:modelValue":n[0]||(n[0]=a=>o(e).name=a),error:!!o(e).errors.name,"error-message":o(e).errors.name,dense:"",placeholder:"Name *"},null,8,["modelValue","error","error-message"]),s(p,{name:"email",standout:"",modelValue:o(e).email,"onUpdate:modelValue":n[1]||(n[1]=a=>o(e).email=a),error:!!o(e).errors.email,"error-message":o(e).errors.email,dense:"",placeholder:"Email *"},null,8,["modelValue","error","error-message"]),s(p,{name:"password",standout:"",modelValue:o(e).password,"onUpdate:modelValue":n[2]||(n[2]=a=>o(e).password=a),error:!!o(e).errors.password,"error-message":o(e).errors.password,dense:"",placeholder:"Password *"},null,8,["modelValue","error","error-message"]),s(w,{modelValue:o(e).district_id,"onUpdate:modelValue":n[3]||(n[3]=a=>o(e).district_id=a),error:!!o(e).errors.district_id,"error-message":o(e).errors.district_id,options:o(V),dense:"","emit-value":"","fill-input":"",filled:"","hide-selected":"","map-options":"","option-label":"district_name","option-value":"id",placeholder:"Select District *",standout:"","use-input":""},{prepend:l(()=>[s(_,{name:"book"})]),"no-option":l(()=>[s(v,null,{default:l(()=>[s(b,{class:"text-gresy"},{default:l(()=>[h(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","error-message","options"]),s(w,{modelValue:o(e).roles_id,"onUpdate:modelValue":n[4]||(n[4]=a=>o(e).roles_id=a),error:!!o(e).errors.roles_id,"error-message":o(e).errors.roles_id,options:o(S),dense:"","emit-value":"","fill-input":"",filled:"","hide-selected":"","map-options":"","option-label":"name","option-value":"id",placeholder:"Select Role *",standout:"","use-input":""},{prepend:l(()=>[s(_,{name:"book"})]),"no-option":l(()=>[s(v,null,{default:l(()=>[s(b,{class:"text-gresy"},{default:l(()=>[h(" No results ")]),_:1})]),_:1})]),_:1},8,["modelValue","error","error-message","options"]),s(d,{label:"Submit",dense:"",color:"black",type:"submit",disable:o(e).processing},null,8,["disable"])])])],40,J)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]))}};export{oe as default};
